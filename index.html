<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Progress Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    .progress-container {
      margin: 10px 0;
    }

    .progress-bar {
      width: 100%;
      background-color: #e0e0e0;
      border-radius: 8px;
      overflow: hidden;
      height: 20px;
      margin-top: 5px;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background-color: #4caf50;
      transition: width 0.3s ease;
      text-align: right;
      color: white;
      padding-right: 6px;
      font-size: 12px;
    }

    #score {
      text-align: center;
      margin: 10px 0;
      font-size: 18px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .section {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      height: 600px;
      overflow-y: auto;
    }

    h2 {
      font-size: 16px;
      margin-top: 0;
      border-bottom: 1px solid #eee;
    }

    label {
      display: block;
      margin: 4px 0;
    }

    button {
      margin: 15px auto;
      display: block;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>ðŸ§  Skill Progress Tracker</h1>

<div class="progress-container">
  <strong>Overall Progress:</strong>
  <div class="progress-bar"><div class="progress-fill" id="mainProgress">0%</div></div>
</div>
<div id="score">Progress: 0 / 0</div>

<div class="grid" id="tracker"></div>

<button onclick="saveProgress()">ðŸ’¾ Save Progress</button>

<script>
const data = {
  "SysDesign": ["AppChar", "Comms", "DbOpt", "Db", "ScaTech", "WebApp", "z_UC_DistWCraw", "z_UC_DropBox", "z_UC_Mess", "z_UC_RateLim", "z_UC_TypAhSugSer", "z_UC_Uber", "z_UC_UrlShor", "z_UC_Yt"],
  "ML_PyTorch": ["Introduction", "PyTorch Fundamentals", "PyTorch Workflow", "PyTorch Neural Network Classification", "PyTorch Computer Vision", "PyTorch Custom Datasets", "PyTorch Going Modular", "PyTorch Transfer Learning", "PyTorch Experiment Tracking", "PyTorch Paper Replicating", "PyTorch Model Deployment", "Introduction to PyTorch2.0 and torch.compile"],
  "Competitive Programming": ["1_Dp_Beginner", "2_Dp_Intermediate", "3_Dp_Advanced", "4_Tree_Beginner", "5_Tree_Advanced", "6_Graphs_Beginner", "7_Graphs_Intermediate", "8_Graphs_Advanced", "9_RQ_Beginner", "10_RQ_Advanced", "11_Bonus_Topics"],
  "100xDev": Array.from({length: 36}, (_, i) => `Week ${i}`)
};

let total = 0;
let checked = 0;

function updateScore() {
  const percent = Math.round((checked / total) * 100);
  document.getElementById("score").textContent = `Progress: ${checked} / ${total}`;
  const mainBar = document.getElementById("mainProgress");
  mainBar.style.width = `${percent}%`;
  mainBar.textContent = `${percent}%`;
}

function updateCategoryProgress(sectionId, sectionTotal, sectionChecked) {
  const percent = Math.round((sectionChecked / sectionTotal) * 100);
  const bar = document.getElementById(`bar-${sectionId}`);
  bar.style.width = `${percent}%`;
  bar.textContent = `${percent}%`;
}

function saveProgress() {
  const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
  const progress = Array.from(allCheckboxes).map(cb => cb.checked);
  localStorage.setItem("progressData", JSON.stringify(progress));
  alert("âœ… Progress saved!");
}

function loadProgress() {
  const saved = JSON.parse(localStorage.getItem("progressData") || "[]");
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach((cb, i) => {
    cb.checked = saved[i] || false;
    if (cb.checked) checked++;
  });
}

function buildUI() {
  const tracker = document.getElementById("tracker");

  Object.entries(data).forEach(([section, tasks], sectionIndex) => {
    const div = document.createElement("div");
    div.className = "section";

    const h2 = document.createElement("h2");
    h2.textContent = section;
    div.appendChild(h2);

    // Progress bar for section
    const progressContainer = document.createElement("div");
    progressContainer.className = "progress-container";
    const bar = document.createElement("div");
    bar.className = "progress-bar";
    const fill = document.createElement("div");
    fill.className = "progress-fill";
    fill.id = `bar-${section}`;
    fill.textContent = "0%";
    bar.appendChild(fill);
    progressContainer.appendChild(bar);
    div.appendChild(progressContainer);

    tasks.forEach((task, idx) => {
      total++;
      const label = document.createElement("label");
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.dataset.section = section;
      checkbox.addEventListener("change", () => {
        checked += checkbox.checked ? 1 : -1;
        updateScore();
        updateSectionBars();
      });
      label.appendChild(checkbox);
      label.append(` ${task}`);
      div.appendChild(label);
    });

    tracker.appendChild(div);
  });

  loadProgress();
  updateScore();
  updateSectionBars();
}

function updateSectionBars() {
  const sectionCounts = {};

  document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
    const section = cb.dataset.section;
    if (!sectionCounts[section]) {
      sectionCounts[section] = { total: 0, checked: 0 };
    }
    sectionCounts[section].total++;
    if (cb.checked) sectionCounts[section].checked++;
  });

  Object.entries(sectionCounts).forEach(([section, { total, checked }]) => {
    updateCategoryProgress(section, total, checked);
  });
}

buildUI();
</script>

</body>
</html>
